# 博客模板需求分析

本博客模板参考了[静かな森 - 致虚极，守静笃。](https://innei.in/)和[红尘散仙](https://yexiyue.github.io/)两种风格，旨在打造一个功能丰富、交互炫酷且易于扩展的个人博客系统。具体需求如下：

## 主要功能模块

- **主页**
  - 展示最新文章
  - 炫酷的交互与视觉效果

- **分类页**
  - 展示所有文章分类
  - 支持点击分类查看对应文章列表

- **标签页**
  - 展示所有标签
  - 支持点击标签查看对应文章列表

- **时间线**
  - 按时间顺序展示所有文章
  - 便于回顾和检索历史内容

- **搜索功能**
  - 支持全文检索，快速定位目标文章

- **主题切换**
  - 支持浅色、深色及自动模式，提升用户体验

- **文章详情页**
  - 展示文章内容
  - 支持目录导航、阅读进度显示、预计阅读时间等辅助功能

### 动效设计

在主页和时间线页面，我们可以通过滚动驱动动画来营造炫酷的视觉体验，让浏览过程更加有趣。实现方式有很多：

- 如果喜欢纯 CSS，可以参考[《滚动驱动动画》](https://scroll-driven-animations.style/)，简单又高效。
- 想要更丰富的动画效果，可以试试 JS 框架 [Anime.js](https://animejs.com/)，灵活又强大。
- 而像按钮、菜单、Tabs 这些小组件的动效，推荐用 [Motion](https://motion.dev/)，轻松实现丝滑的交互。

### 页面之间状态共享

使用zustand，参考

- [github:blog-astro-react-zustand-shared-state](https://github.com/firxworx/blog-astro-react-zustand-shared-state)
- [firxworx.com/blog](https://firxworx.com/blog/code/2024-06-23-astro-and-react-shared-state-with-zustand-stores/)

注意有个坑，不要用`useStore`，得使用`useStoreWithEqualityFn`

```ts
export function useAppStore(): AppStore;
export function useAppStore<T>(selector: (state: AppStore) => T): T;
export function useAppStore<T>(selector?: (state: AppStore) => T) {
  return useStoreWithEqualityFn(appStore, selector!, shallow);
}
```

参考：[use-store-with-equality-fn](https://zustand.docs.pmnd.rs/hooks/use-store-with-equality-fn)
